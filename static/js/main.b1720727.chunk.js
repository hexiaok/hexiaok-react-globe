(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,o){e.exports=o(29)},25:function(e,t,o){},26:function(e,t,o){},29:function(e,t,o){"use strict";o.r(t);var i,n,a=o(1),r=o.n(a),s=o(8),c=o.n(s),l=(o(25),o(17)),u=(o(26),o(33)),d=o(2),h=o(0),p=o(5),m=o(10),f=o.n(m),b=o(11),g=o(12),v=o(14);!function(e){e.Camera="CAMERA",e.CameraAmbientLight="CAMERA_AMBIENT_LIGHT",e.CameraPointLight="CAMERA_POINT_LIGHT",e.Globe="GLOBE",e.GlobeBackground="GLOBE_BACKGROUND",e.GlobeClouds="GLOBE_CLOUDS",e.GlobeGlow="GLOBE_GLOW",e.GlobeSphere="GLOBE_SPHERE",e.MarkerObjects="MARKER_OBJECTS",e.Scene="SCENE"}(i||(i={})),function(e){e.Bar="bar",e.Dot="dot"}(n||(n={}));var y=Math.PI,O=[29.8683,121.544],w=["Cubic","In"],C={autoRotateSpeed:.1,distanceRadiusScale:3,enableAutoRotate:!0,enableRotate:!0,enableZoom:!0,maxDistanceRadiusScale:4,maxPolarAngle:y,minPolarAngle:0,rotateSpeed:.2,zoomSpeed:1},k={animationDuration:1e3,distanceRadiusScale:1.5,easingFunction:["Cubic","Out"],enableDefocus:!0},M={backgroundTexture:"https://raw.githubusercontent.com/chrisrzhou/react-globe/master/textures/background.png",cloudsOpacity:.3,cloudsTexture:"https://raw.githubusercontent.com/chrisrzhou/react-globe/master/textures/clouds.png",enableBackground:!0,enableClouds:!0,enableGlow:!0,glowCoefficient:.1,glowColor:"#d1d1d1",glowPower:3,glowRadiusScale:.2,texture:"https://raw.githubusercontent.com/chrisrzhou/react-globe/master/textures/globe_dark.jpg"},S={ambientLightColor:"white",ambientLightIntensity:.8,pointLightColor:"white",pointLightIntensity:1,pointLightPositionRadiusScales:[-2,1,-1]},E={activeScale:1.3,enableGlow:!0,enableTooltip:!0,enterAnimationDuration:1e3,enterEasingFunction:["Linear","None"],exitAnimationDuration:500,exitEasingFunction:["Cubic","Out"],getTooltipContent:function(e){return JSON.stringify(e.coordinates)},glowCoefficient:0,glowPower:3,glowRadiusScale:2,radiusScaleRange:[.005,.02],type:n.Dot},j=(n.Bar,E),G=function(){return(G=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var R=function(){function e(e){this.div=e,this.instance=Object(g.a)(this.div,{animation:"scale"})}return e.prototype.destroy=function(){console.log("Tooltip destroy"),this.instance.destroy()},e.prototype.hide=function(){document.body.style.cursor="inherit",this.div.style.position="fixed",this.div.style.left="0",this.div.style.top="0",this.instance.hide()},e.prototype.show=function(e,t,o){document.body.style.cursor="pointer",this.div.style.position="fixed",this.div.style.left=e+10+"px",this.div.style.top=t+10+"px",this.instance.setContent(o),this.instance.show()},e}();function L(e,t){var o=e[0],i=e[1],n=o*Math.PI/180,a=(i-180)*Math.PI/180;return[-t*Math.cos(n)*Math.cos(a),t*Math.sin(n),t*Math.cos(n)*Math.sin(a)]}function F(e){return e.coordinates.toString()}function x(e,t){var o=0;return e.forEach((function(e){t(e)>o&&(o=t(e))})),o}function P(e,t){var o=1/0;return e.forEach((function(e){t(e)<o&&(o=t(e))})),o}function B(e,t,o,i,n,a){new d.Tween(e).to(t,o).easing(d.Easing[i[0]][i[1]]).on("update",n).on("complete",a).start()}var A=function(){},T={onClickMarker:A,onDefocus:A,onMouseOutMarker:A,onMouseOverMarker:A,onTextureLoaded:A},D={camera:C,globe:M,focus:k,marker:j,light:S},z=function(){function e(e,t){var o=this,n=new h.WebGLRenderer({alpha:!0,antialias:!0,canvas:e}),a=new h.PerspectiveCamera,r=new h.AmbientLight("white"),s=new h.PointLight("white"),c=new h.Group,l=new h.Mesh,u=new h.Mesh,d=new h.Mesh,p=new h.Group,m=new f.a(a,n.domElement),g=new h.Scene,v=new R(t);a.name=i.Camera,r.name=i.CameraAmbientLight,s.name=i.CameraPointLight,c.name=i.Globe,l.name=i.GlobeBackground,u.name=i.GlobeClouds,d.name=i.GlobeSphere,p.name=i.MarkerObjects,g.name=i.Scene,a.add(r),a.add(s),c.add(l),c.add(u),c.add(d),g.add(p),g.add(a),g.add(c),new b.a(n,g,a),g.on("mousemove",(function(e){if(!o.isFocusing()&&o.activeMarker){var t=o.options.marker.activeScale,i=[t,t,t];B(i,[1,1,1],100,w,(function(){var e;o.activeMarkerObject&&(e=o.activeMarkerObject.scale).set.apply(e,i)}),(function(){o.activeMarker=void 0,o.activeMarkerObject=void 0})),o.callbacks.onMouseOutMarker(o.activeMarker,o.activeMarkerObject,e.data.originalEvent),o.tooltip.hide()}}));var y=function(e){console.log(e),o.orbitControls.autoRotate=!0,console.log("handleClick"),o.tooltip.hide(),o.isFocusing()||(console.log("enableDefocus",o.options.focus.enableDefocus),console.log("preFocusPosition",o.preFocusPosition),o.options.focus.enableDefocus&&o.preFocusPosition&&(o.callbacks.onDefocus(o.focus,e.data.originalEvent),o.updateFocus(void 0,o.options.focus)))};g.on("click",y),g.on("touchstart",y),this.activeMarker=void 0,this.activeMarkerObject=void 0,this.animationFrameId=void 0,this.callbacks=T,this.camera=a,this.focus=void 0,this.globe=c,this.isFrozen=!1,this.markerObjects=p,this.options=D,this.orbitControls=m,this.preFocusPosition=void 0,this.renderer=n,this.scene=g,this.tooltip=v,this.updateCallbacks(),this.updateCamera(),this.updateFocus(),this.updateGlobe({enableBackground:!1,enableClouds:!1}),this.updateLights(),this.updateMarkers(),this.updateSize()}return e.prototype.animate=function(){this.render(),this.animationFrameId=requestAnimationFrame(this.animate.bind(this))},e.prototype.animateClouds=function(){var e=this.getObjectByName(i.GlobeClouds);["x","y","z"].forEach((function(t){e.rotation[t]+=Math.random()/1e4}))},e.prototype.applyAnimations=function(e){var t=this,o=this.focus,i=this.options.focus,n=0,a=[];return e.forEach((function(e){var o=e.animationDuration,i=e.coordinates,r=e.distanceRadiusScale,s=e.easingFunction,c=setTimeout((function(){t.updateFocus(i,{animationDuration:o,distanceRadiusScale:r,easingFunction:s},!0)}),n);a.push(c),n+=o})),function(){a.forEach((function(e){clearTimeout(e)})),t.updateFocus(o,i)}},e.prototype.destroy=function(){cancelAnimationFrame(this.animationFrameId),this.tooltip.destroy()},e.prototype.enableOrbitControls=function(e,t){void 0===t&&(t=e),this.orbitControls.enabled=e,this.orbitControls.autoRotate=t},e.prototype.freeze=function(){this.isFrozen=!0,this.enableOrbitControls(!1),cancelAnimationFrame(this.animationFrameId)},e.prototype.getObjectByName=function(e){return this.scene.getObjectByName(e)},e.prototype.isFocusing=function(){return!this.orbitControls.enabled},e.prototype.render=function(){this.renderer.sortObjects=!1,this.renderer.render(this.scene,this.camera),this.animateClouds(),this.orbitControls.update(),Object(d.update)()},e.prototype.updateCallbacks=function(e){var t=this;void 0===e&&(e={}),Object.keys(T).forEach((function(o){t.callbacks[o]=e[o]||T[o]}))},e.prototype.updateCamera=function(e,t){void 0===e&&(e=O),void 0===t&&(t={}),this.updateOptions(t,"camera");var o=this.options.camera,i=o.autoRotateSpeed,n=o.distanceRadiusScale,a=o.enableAutoRotate,r=o.enableRotate,s=o.enableZoom,c=o.maxDistanceRadiusScale,l=o.maxPolarAngle,u=o.minPolarAngle,d=o.rotateSpeed,h=o.zoomSpeed;if(this.initialCoordinates!==e){var p=L(e,300*n),m=p[0],f=p[1],b=p[2];this.camera.position.set(m,f,b),this.initialCoordinates=e}console.log("STOP3",t),this.camera.far=3e4,this.camera.fov=45,this.camera.near=1,this.orbitControls.autoRotate=a,this.orbitControls.autoRotateSpeed=i,this.orbitControls.dampingFactor=.1,this.orbitControls.enableDamping=!0,this.orbitControls.enablePan=!1,this.orbitControls.enableRotate=r,this.orbitControls.enableZoom=s,this.orbitControls.maxDistance=300*c,this.orbitControls.maxPolarAngle=l,this.orbitControls.minDistance=330,this.orbitControls.minPolarAngle=u,this.orbitControls.rotateSpeed=d,this.orbitControls.zoomSpeed=h},e.prototype.updateFocus=function(e,t,o){var i=this;void 0===t&&(t={}),void 0===o&&(o=!1),this.updateOptions(t,"focus"),this.focus=e;var n=this.options.focus,a=n.animationDuration,r=n.distanceRadiusScale,s=n.easingFunction;if(!this.isFrozen)if(this.focus){var c=[this.camera.position.x,this.camera.position.y,this.camera.position.z],l=L(this.focus,300*r);this.preFocusPosition=this.preFocusPosition||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;t=0;for(var i=Array(e),n=0;t<o;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,n++)i[n]=a[r];return i}(c),B(c,l,a,s,(function(){var e;i.enableOrbitControls(!1),(e=i.camera.position).set.apply(e,c)}),(function(){o&&(i.focus=void 0,i.preFocusPosition=void 0),i.enableOrbitControls(!0,o)}))}else if(this.preFocusPosition){var u=[this.camera.position.x,this.camera.position.y,this.camera.position.z];l=this.preFocusPosition,B(u,l,a,s,(function(){var e;i.enableOrbitControls(!1),(e=i.camera.position).set.apply(e,u)}),(function(){i.preFocusPosition=void 0,i.enableOrbitControls(!0)}))}},e.prototype.updateGlobe=function(e){var t=this;void 0===e&&(e={}),this.updateOptions(e,"globe");var o=this.options.globe,n=o.backgroundTexture,a=o.cloudsOpacity,r=o.cloudsTexture,s=o.enableBackground,c=o.enableClouds,l=o.enableGlow,u=o.glowColor,d=o.glowCoefficient,m=o.glowPower,f=o.glowRadiusScale,b=o.texture,g=this.getObjectByName(i.GlobeBackground),v=this.getObjectByName(i.GlobeClouds),y=this.getObjectByName(i.GlobeSphere);(new h.TextureLoader).load(b,(function(e){if(y.geometry=new h.SphereGeometry(300,50,50),y.material=new h.MeshLambertMaterial({map:e}),l){y.remove(t.getObjectByName(i.GlobeGlow));var o=Object(p.a)(y.geometry,{backside:!0,color:u,coefficient:d,power:m,size:300*f});o.name=i.GlobeGlow,y.add(o)}t.callbacks.onTextureLoaded()})),s&&(new h.TextureLoader).load(n,(function(e){g.geometry=new h.SphereGeometry(3e3,50,50),g.material=new h.MeshBasicMaterial({map:e,side:h.BackSide})})),c&&(new h.TextureLoader).load(r,(function(e){v.geometry=new h.SphereGeometry(301,50,50),v.material=new h.MeshLambertMaterial({map:e,transparent:!0}),v.material.opacity=a}))},e.prototype.updateLights=function(e){void 0===e&&(e={}),this.updateOptions(e,"light");var t=this.options.light,o=t.ambientLightColor,n=t.ambientLightIntensity,a=t.pointLightColor,r=t.pointLightIntensity,s=t.pointLightPositionRadiusScales,c=this.getObjectByName(i.CameraAmbientLight),l=this.getObjectByName(i.CameraPointLight);c.color=new h.Color(o),c.intensity=n,l.color=new h.Color(a),l.intensity=r,l.position.set(300*s[0],300*s[1],300*s[2])},e.prototype.updateMarkers=function(e,t){var o=this;void 0===e&&(e=[]),void 0===t&&(t={}),this.updateOptions(t,"marker");var i=this.options.marker,a=i.activeScale,r=i.enableGlow,s=i.enableTooltip,c=i.enterAnimationDuration,l=i.enterEasingFunction,d=i.exitAnimationDuration,m=i.exitEasingFunction,f=i.getTooltipContent,b=i.glowCoefficient,g=i.glowPower,v=i.glowRadiusScale,y=i.offsetRadiusScale,O=i.radiusScaleRange,C=i.renderer,k=i.type,M=Object(u.a)().domain([P(e,(function(e){return e.value})),x(e,(function(e){return e.value}))]).range([300*O[0],300*O[1]]),S=new Set(e.map(F)),E=new Set(this.markerObjects.children.map((function(e){return e.name})));e.forEach((function(e){var t,i,u=e.coordinates,d=e.value,m=F(e),O=M(d);if(!E.has(m)){if(void 0!==C)i=C(e);else{var S=e.color||"gold",j={size:0},G={size:O},R=new h.Mesh;B(j,G,c,l,(function(){switch(k){case n.Bar:R.geometry=new h.BoxGeometry(3,3,j.size),R.material=new h.MeshLambertMaterial({color:S});break;case n.Dot:default:if(R.geometry=new h.SphereGeometry(j.size,10,10),R.material=new h.MeshBasicMaterial({color:S}),r){var e=Object(p.a)(R.geometry.clone(),{backside:!1,color:S,coefficient:b,power:g,size:j.size*v});R.children=[],R.add(e)}}})),i=R}var x=L(u,300+(void 0!==y?300*y:k===n.Dot?O*(1+v)/2:0));(t=i.position).set.apply(t,x),i.lookAt(new h.Vector3(0,0,0)),i.name=m,o.markerObjects.add(i)}var P=function(t){t.stopPropagation();var i=t.data.originalEvent,n=i.clientX||i.targetTouches[0].clientX,a=i.clientY||i.targetTouches[0].clientY;s&&o.tooltip.show(n,a,f(e)),this.orbitControls.autoRotate=!1,console.log("STOP")};(i=o.markerObjects.getObjectByName(m)).on("click",P.bind(o)),i.on("touchstart",P.bind(o)),i.on("mousemove",(function(e){if(o.isFocusing())o.tooltip.hide();else{e.stopPropagation();var t=i.scale.toArray();B(t,[a,a,a],100,w,(function(){var e;i&&(e=i.scale).set.apply(e,t)}))}}))})),this.markerObjects.children.filter((function(e){return!S.has(e.name)})).forEach((function(e){var t=e.scale.toArray();B(t,[0,0,0],d,m,(function(){var o;e&&(o=e.scale).set.apply(o,t)}),(function(){o.markerObjects.remove(e)}))}))},e.prototype.updateOptions=function(e,t){var o;this.options=G(G({},D),((o={})[t]=G(G({},D[t]),e),o))},e.prototype.updateSize=function(e){if(e){var t=e[0],o=e[1];this.renderer.setSize(t,o),this.camera.aspect=t/o}this.camera.updateProjectionMatrix()},e.prototype.unfreeze=function(){this.isFrozen&&(this.isFrozen=!1,this.enableOrbitControls(!0),this.animate())},e}();function N(e){var t=e.animations,o=e.cameraOptions,i=e.focus,n=e.focusOptions,s=e.globeOptions,c=e.lightOptions,l=e.initialCoordinates,u=e.markers,d=e.markerOptions,h=e.onClickMarker,p=e.onDefocus,m=e.onMouseOutMarker,f=e.onMouseOverMarker,b=e.onGetGlobeInstance,g=e.onTextureLoaded,y=e.size,O=Object(a.useRef)(),w=Object(a.useRef)(),C=Object(a.useRef)(),k=Object(a.useRef)(),M=function(e,t){var o=Object(a.useState)([0,0]),i=o[0],n=o[1];return Object(a.useEffect)((function(){var o=e.current,i=0,a=0;t?(i=t[0],a=t[1]):(i=o.offsetWidth,a=o.offsetHeight),n([i,a]);var r=new v.a((function(e){if(e&&e.length&&void 0===t){var o=e[0].contentRect,i=o.width,a=o.height;n([i,a])}}));return r.observe(o),function(){r.unobserve(o)}}),[t,e]),i}(C,y);return Object(a.useEffect)((function(){var e=C.current,t=new z(O.current,k.current);return e.appendChild(t.renderer.domElement),t.animate(),w.current=t,b&&b(t),function(){e.removeChild(t.renderer.domElement),t.destroy()}}),[]),Object(a.useEffect)((function(){w.current.updateCallbacks({onClickMarker:h,onDefocus:p,onMouseOutMarker:m,onMouseOverMarker:f,onTextureLoaded:g})}),[h,p,m,f,g]),Object(a.useEffect)((function(){w.current.updateCamera(l,o)}),[o,l]),Object(a.useEffect)((function(){w.current.updateFocus(i,n)}),[i,n]),Object(a.useEffect)((function(){w.current.updateGlobe(s)}),[s]),Object(a.useEffect)((function(){w.current.updateLights(c)}),[c]),Object(a.useEffect)((function(){w.current.updateMarkers(u,d)}),[d,u]),Object(a.useEffect)((function(){return w.current.applyAnimations(t)}),[t]),Object(a.useEffect)((function(){w.current.updateSize(M)}),[M]),r.a.createElement("div",{ref:C,style:{height:"100%",width:"100%"}},r.a.createElement("canvas",{ref:O,style:{display:"block"}}),r.a.createElement("div",{ref:k}))}N.defaultProps={animations:[],cameraOptions:C,focusOptions:k,globeOptions:M,lightOptions:S,initialCoordinates:O,markers:[],markerOptions:j};var I=N,_=o(18),H=[{id:1,city:"Ningbo | ",year:"-2006",activity:"just a kid",color:"white",coordinates:[29.8683,121.544],value:100},{id:2,city:"Tianjin | ",year:"2006-2011",activity:"student",color:"white",coordinates:[39.3434,117.3616],value:100},{id:3,city:"Boston | ",color:"white",year:"2011-2015",activity:"student, researcher",coordinates:[42.3601,-71.0589],value:100},{id:4,city:"Little Farmer's Cay | ",color:"white",year:"2013",activity:"researcher",coordinates:[23.958,-76.3224],value:100},{id:4,city:"Singapore | ",color:"white",year:"2015-2019",activity:"designer",coordinates:[1.3521,103.8198],value:100},{id:5,city:"Berlin | ",color:"white",year:"2019-",activity:"designer",coordinates:[52.52,13.405],value:100}];var J=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),o=t[0],i=t[1];return r.a.createElement("div",{className:"App",onMouseDown:function(){return i(!o)}},r.a.createElement(_.a,{fluid:!0},r.a.createElement("div",{className:"row",style:{height:"100vh"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#ffffff"},className:"col-xl-6"},r.a.createElement("h1",{style:{padding:"8.6%",lineHeight:"160%"}},"Jian He",r.a.createElement("br",null),"Designer now based in Berlin")),r.a.createElement("div",{className:"col-xl-6",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{height:"64%",width:"100%"}},r.a.createElement(I,{globeOptions:{enableBackground:!1,enableClouds:!1,enableGlow:!1,cloudsTexture:null},cameraOptions:{autoRotateSpeed:.8,enableZoom:!0,clickedOut:o},markers:H,markerOptions:{glowCoefficient:.25,activeScale:1,enableTooltip:!0,getTooltipContent:function(e){return"".concat(e.city," ").concat(e.year," <br> ").concat(e.activity)},radiusScaleRange:[.001,.045]}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o(28);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.b1720727.chunk.js.map